const Web3 = require('web3');
const fs = require('fs');
require('dotenv').config();

// Replace with your RPC URL (e.g., AirDAO, Ethereum, etc.)
const RPC_URL = 'https://rpc.airdao.io';
const web3 = new Web3(RPC_URL);

// Replace with your private key and ensure it is stored securely
const PRIVATE_KEY = process.env.PRIVATE_KEY;
const deployerAccount = web3.eth.accounts.privateKeyToAccount("0xe5ed14d3d9f60e5d1550ce0cf4a2795deb4fcf1dc647c73a00a86adb3ffcb93d");

// Set up the contract ABI and Bytecode
const contractABI = [
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "name",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "symbol",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "metadataURI",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "imageURI",
				"type": "string"
			}
		],
		"name": "createToken",
		"outputs": [
			{
				"internalType": "address",
				"name": "token",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "bondingCurve",
				"type": "address"
			},
			{
				"internalType": "string",
				"name": "identifier",
				"type": "string"
			}
		],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_feeToSetter",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "_feeTo",
				"type": "address"
			}
		],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "feeToSetter",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "feeTo",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "creationFee",
				"type": "uint256"
			}
		],
		"name": "FactoryDeployed",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "token",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "address",
				"name": "bondingCurve",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "metadataURI",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "imageURI",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "identifier",
				"type": "string"
			}
		],
		"name": "TokenCreated",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"name": "allTokens",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "creationFee",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "feeTo",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "feeToSetter",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "token",
				"type": "address"
			}
		],
		"name": "getTokenDetails",
		"outputs": [
			{
				"internalType": "string",
				"name": "name",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "symbol",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "metadataURI",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "imageURI",
				"type": "string"
			},
			{
				"internalType": "address",
				"name": "bondingCurve",
				"type": "address"
			},
			{
				"internalType": "string",
				"name": "identifier",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "tokenDetails",
		"outputs": [
			{
				"internalType": "string",
				"name": "metadataURI",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "imageURI",
				"type": "string"
			},
			{
				"internalType": "address",
				"name": "bondingCurve",
				"type": "address"
			},
			{
				"internalType": "string",
				"name": "identifier",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
]; // Replace with your ABI file path
const contractBytecode = "608060405268056bc75e2d631000006002553480156200001e57600080fd5b5060405162004d4b38038062004d4b833981810160405281019062000044919062000275565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415620000b7576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620000ae9062000397565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614156200012a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016200012190620003b9565b60405180910390fd5b81600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167fd2e62f6600955b02918a1c7a0da3b114b492c99d92c8b6d15c9df3248b1ea54c6002546040516200024e9190620003db565b60405180910390a3505062000461565b6000815190506200026f8162000447565b92915050565b600080604083850312156200028957600080fd5b600062000299858286016200025e565b9250506020620002ac858286016200025e565b9150509250929050565b6000620002c5602b83620003f8565b91507f466163746f72793a20466565546f5365747465722063616e6e6f74206265207a60008301527f65726f20616464726573730000000000000000000000000000000000000000006020830152604082019050919050565b60006200032d602583620003f8565b91507f466163746f72793a20466565546f2063616e6e6f74206265207a65726f20616460008301527f64726573730000000000000000000000000000000000000000000000000000006020830152604082019050919050565b62000391816200043d565b82525050565b60006020820190508181036000830152620003b281620002b6565b9050919050565b60006020820190508181036000830152620003d4816200031e565b9050919050565b6000602082019050620003f2600083018462000386565b92915050565b600082825260208201905092915050565b600062000416826200041d565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b620004528162000409565b81146200045e57600080fd5b50565b6148da80620004716000396000f3fe6080604052600436106200007a5760003560e01c806388aa8bee116200005557806388aa8bee1462000123578063a0769659146200016c578063dce0b4e414620001a4578063dd4be68314620001d4576200007a565b8063017e7e58146200007f578063094b741514620000af578063634282af14620000df575b600080fd5b3480156200008c57600080fd5b50620000976200021b565b604051620000a6919062001708565b60405180910390f35b348015620000bc57600080fd5b50620000c76200023f565b604051620000d6919062001708565b60405180910390f35b348015620000ec57600080fd5b506200010b600480360381019062000105919062001453565b62000265565b6040516200011a919062001708565b60405180910390f35b3480156200013057600080fd5b506200014f600480360381019062000149919062001312565b620002a5565b604051620001639695949392919062001878565b60405180910390f35b6200018a600480360381019062000184919062001383565b6200065f565b6040516200019b9392919062001725565b60405180910390f35b348015620001b157600080fd5b50620001bc62000b69565b604051620001cb919062001990565b60405180910390f35b348015620001e157600080fd5b50620002006004803603810190620001fa919062001312565b62000b6f565b60405162000212949392919062001816565b60405180910390f35b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600481815481106200027657600080fd5b906000526020600020016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b606080606080600060606000600360008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060800160405290816000820180546200030d9062001e92565b80601f01602080910402602001604051908101604052809291908181526020018280546200033b9062001e92565b80156200038c5780601f1062000360576101008083540402835291602001916200038c565b820191906000526020600020905b8154815290600101906020018083116200036e57829003601f168201915b50505050508152602001600182018054620003a79062001e92565b80601f0160208091040260200160405190810160405280929190818152602001828054620003d59062001e92565b8015620004265780601f10620003fa5761010080835404028352916020019162000426565b820191906000526020600020905b8154815290600101906020018083116200040857829003601f168201915b505050505081526020016002820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600382018054620004979062001e92565b80601f0160208091040260200160405190810160405280929190818152602001828054620004c59062001e92565b8015620005165780601f10620004ea5761010080835404028352916020019162000516565b820191906000526020600020905b815481529060010190602001808311620004f857829003601f168201915b505050505081525050905060008890508073ffffffffffffffffffffffffffffffffffffffff166306fdde036040518163ffffffff1660e01b815260040160006040518083038186803b1580156200056d57600080fd5b505afa15801562000582573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f82011682018060405250810190620005ad91906200133e565b8173ffffffffffffffffffffffffffffffffffffffff166395d89b416040518163ffffffff1660e01b815260040160006040518083038186803b158015620005f457600080fd5b505afa15801562000609573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f820116820180604052508101906200063491906200133e565b8360000151846020015185604001518660600151975097509750975097509750505091939550919395565b6000806060600254341015620006ac576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620006a3906200194c565b60405180910390fd5b6000604051620006bc9062001134565b604051809103906000f080158015620006d9573d6000803e3d6000fd5b509050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614156200074f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040162000746906200192a565b60405180910390fd5b6000888883604051620007629062001142565b6200077093929190620017cb565b604051809103906000f0801580156200078d573d6000803e3d6000fd5b509050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16141562000803576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620007fa9062001908565b60405180910390fd5b8094508173ffffffffffffffffffffffffffffffffffffffff1663c4d66de8866040518263ffffffff1660e01b815260040162000841919062001708565b600060405180830381600087803b1580156200085c57600080fd5b505af115801562000871573d6000803e3d6000fd5b505050508193506000620008858662000d6f565b604051602001620008979190620016cb565b604051602081830303815290604052905060405180608001604052808981526020018881526020018673ffffffffffffffffffffffffffffffffffffffff16815260200182815250600360008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000190805190602001906200093c92919062001150565b5060208201518160010190805190602001906200095b92919062001150565b5060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506060820151816003019080519060200190620009c192919062001150565b509050506004869080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508573ffffffffffffffffffffffffffffffffffffffff167ffe210c99153843bc67efa2e9a61ec1d63c505e379b9dcf05a9520e84e36e6063868a8a8560405162000a76949392919062001769565b60405180910390a260008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163460405162000ac790620016f1565b60006040518083038185875af1925050503d806000811462000b06576040519150601f19603f3d011682016040523d82523d6000602084013e62000b0b565b606091505b505090508062000b52576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040162000b49906200196e565b60405180910390fd5b868683965096509650505050509450945094915050565b60025481565b600360205280600052604060002060009150905080600001805462000b949062001e92565b80601f016020809104026020016040519081016040528092919081815260200182805462000bc29062001e92565b801562000c135780601f1062000be75761010080835404028352916020019162000c13565b820191906000526020600020905b81548152906001019060200180831162000bf557829003601f168201915b50505050509080600101805462000c2a9062001e92565b80601f016020809104026020016040519081016040528092919081815260200182805462000c589062001e92565b801562000ca95780601f1062000c7d5761010080835404028352916020019162000ca9565b820191906000526020600020905b81548152906001019060200180831162000c8b57829003601f168201915b5050505050908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169080600301805462000ce69062001e92565b80601f016020809104026020016040519081016040528092919081815260200182805462000d149062001e92565b801562000d655780601f1062000d395761010080835404028352916020019162000d65565b820191906000526020600020905b81548152906001019060200180831162000d4757829003601f168201915b5050505050905084565b60606000602a67ffffffffffffffff81111562000db5577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6040519080825280601f01601f19166020018201604052801562000de85781602001600182028036833780820191505090505b5090507f30000000000000000000000000000000000000000000000000000000000000008160008151811062000e47577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053507f78000000000000000000000000000000000000000000000000000000000000008160018151811062000ed2577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535060005b6014811015620010de57600081601362000f1f919062001d8c565b600862000f2d919062001ce9565b600262000f3b919062001bac565b8573ffffffffffffffffffffffffffffffffffffffff1662000f5e919062001ae1565b60f81b9050600060108260f81c62000f77919062001b19565b60f81b905060008160f81c601062000f90919062001d4a565b8360f81c62000fa0919062001dc7565b60f81b905062000fb082620010e8565b85600286600262000fc2919062001ce9565b62000fce919062001a46565b8151811062001006577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053506200104081620010e8565b85600386600262001052919062001ce9565b6200105e919062001a46565b8151811062001096577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053505050508080620010d59062001ec8565b91505062000f04565b5080915050919050565b6000600a8260f81c60ff161015620011175760308260f81c6200110c919062001aa3565b60f81b90506200112f565b60578260f81c62001129919062001aa3565b60f81b90505b919050565b611678806200202583390190565b611208806200369d83390190565b8280546200115e9062001e92565b90600052602060002090601f016020900481019282620011825760008555620011ce565b82601f106200119d57805160ff1916838001178555620011ce565b82800160010185558215620011ce579182015b82811115620011cd578251825591602001919060010190620011b0565b5b509050620011dd9190620011e1565b5090565b5b80821115620011fc576000816000905550600101620011e2565b5090565b6000620012176200121184620019e1565b620019ad565b9050828152602081018484840111156200123057600080fd5b6200123d84828562001e4d565b509392505050565b60006200125c6200125684620019e1565b620019ad565b9050828152602081018484840111156200127557600080fd5b6200128284828562001e5c565b509392505050565b6000813590506200129b8162001ff0565b92915050565b600082601f830112620012b357600080fd5b8135620012c584826020860162001200565b91505092915050565b600082601f830112620012e057600080fd5b8151620012f284826020860162001245565b91505092915050565b6000813590506200130c816200200a565b92915050565b6000602082840312156200132557600080fd5b600062001335848285016200128a565b91505092915050565b6000602082840312156200135157600080fd5b600082015167ffffffffffffffff8111156200136c57600080fd5b6200137a84828501620012ce565b91505092915050565b600080600080608085870312156200139a57600080fd5b600085013567ffffffffffffffff811115620013b557600080fd5b620013c387828801620012a1565b945050602085013567ffffffffffffffff811115620013e157600080fd5b620013ef87828801620012a1565b935050604085013567ffffffffffffffff8111156200140d57600080fd5b6200141b87828801620012a1565b925050606085013567ffffffffffffffff8111156200143957600080fd5b6200144787828801620012a1565b91505092959194509250565b6000602082840312156200146657600080fd5b60006200147684828501620012fb565b91505092915050565b6200148a8162001e02565b82525050565b60006200149d8262001a14565b620014a9818562001a2a565b9350620014bb81856020860162001e5c565b620014c68162001fd2565b840191505092915050565b6000620014de8262001a14565b620014ea818562001a3b565b9350620014fc81856020860162001e5c565b80840191505092915050565b60006200151760208362001a2a565b91507f466163746f72793a204552433230206465706c6f796d656e74206661696c65646000830152602082019050919050565b60006200155960278362001a2a565b91507f466163746f72793a20426f6e64696e674375727665206465706c6f796d656e7460008301527f206661696c6564000000000000000000000000000000000000000000000000006020830152604082019050919050565b6000620015c160228362001a2a565b91507f466163746f72793a20496e73756666696369656e74206372656174696f6e206660008301527f65650000000000000000000000000000000000000000000000000000000000006020830152604082019050919050565b60006200162960058362001a3b565b91507f44414f4d450000000000000000000000000000000000000000000000000000006000830152600582019050919050565b60006200166b601c8362001a2a565b91507f466163746f72793a20466565207472616e73666572206661696c6564000000006000830152602082019050919050565b6000620016ad60008362001a1f565b9150600082019050919050565b620016c58162001e36565b82525050565b6000620016d98284620014d1565b9150620016e6826200161a565b915081905092915050565b6000620016fe826200169e565b9150819050919050565b60006020820190506200171f60008301846200147f565b92915050565b60006060820190506200173c60008301866200147f565b6200174b60208301856200147f565b81810360408301526200175f818462001490565b9050949350505050565b60006080820190506200178060008301876200147f565b818103602083015262001794818662001490565b90508181036040830152620017aa818562001490565b90508181036060830152620017c0818462001490565b905095945050505050565b60006060820190508181036000830152620017e7818662001490565b90508181036020830152620017fd818562001490565b90506200180e60408301846200147f565b949350505050565b6000608082019050818103600083015262001832818762001490565b9050818103602083015262001848818662001490565b90506200185960408301856200147f565b81810360608301526200186d818462001490565b905095945050505050565b600060c082019050818103600083015262001894818962001490565b90508181036020830152620018aa818862001490565b90508181036040830152620018c0818762001490565b90508181036060830152620018d6818662001490565b9050620018e760808301856200147f565b81810360a0830152620018fb818462001490565b9050979650505050505050565b60006020820190508181036000830152620019238162001508565b9050919050565b6000602082019050818103600083015262001945816200154a565b9050919050565b600060208201905081810360008301526200196781620015b2565b9050919050565b6000602082019050818103600083015262001989816200165c565b9050919050565b6000602082019050620019a76000830184620016ba565b92915050565b6000604051905081810181811067ffffffffffffffff82111715620019d757620019d662001fa3565b5b8060405250919050565b600067ffffffffffffffff821115620019ff57620019fe62001fa3565b5b601f19601f8301169050602081019050919050565b600081519050919050565b600081905092915050565b600082825260208201905092915050565b600081905092915050565b600062001a538262001e36565b915062001a608362001e36565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0382111562001a985762001a9762001f16565b5b828201905092915050565b600062001ab08262001e40565b915062001abd8362001e40565b92508260ff0382111562001ad65762001ad562001f16565b5b828201905092915050565b600062001aee8262001e36565b915062001afb8362001e36565b92508262001b0e5762001b0d62001f45565b5b828204905092915050565b600062001b268262001e40565b915062001b338362001e40565b92508262001b465762001b4562001f45565b5b828204905092915050565b6000808291508390505b600185111562001ba35780860481111562001b7b5762001b7a62001f16565b5b600185161562001b8b5780820291505b808102905062001b9b8562001fe3565b945062001b5b565b94509492505050565b600062001bb98262001e36565b915062001bc68362001e36565b925062001bf57fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff848462001bfd565b905092915050565b60008262001c0f576001905062001ce2565b8162001c1f576000905062001ce2565b816001811462001c38576002811462001c435762001c79565b600191505062001ce2565b60ff84111562001c585762001c5762001f16565b5b8360020a91508482111562001c725762001c7162001f16565b5b5062001ce2565b5060208310610133831016604e8410600b841016171562001cb35782820a90508381111562001cad5762001cac62001f16565b5b62001ce2565b62001cc2848484600162001b51565b9250905081840481111562001cdc5762001cdb62001f16565b5b81810290505b9392505050565b600062001cf68262001e36565b915062001d038362001e36565b9250817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff048311821515161562001d3f5762001d3e62001f16565b5b828202905092915050565b600062001d578262001e40565b915062001d648362001e40565b92508160ff048311821515161562001d815762001d8062001f16565b5b828202905092915050565b600062001d998262001e36565b915062001da68362001e36565b92508282101562001dbc5762001dbb62001f16565b5b828203905092915050565b600062001dd48262001e40565b915062001de18362001e40565b92508282101562001df75762001df662001f16565b5b828203905092915050565b600062001e0f8262001e16565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600060ff82169050919050565b82818337600083830152505050565b60005b8381101562001e7c57808201518184015260208101905062001e5f565b8381111562001e8c576000848401525b50505050565b6000600282049050600182168062001eab57607f821691505b6020821081141562001ec25762001ec162001f74565b5b50919050565b600062001ed58262001e36565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82141562001f0b5762001f0a62001f16565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b60008160011c9050919050565b62001ffb8162001e02565b81146200200757600080fd5b50565b620020158162001e36565b81146200202157600080fd5b5056fe6080604052692a5a058fc295ed000000600155670de0b6b3a7640000600255600160035573fb9d8c2218e310a40276d1c6f6d0cf3f725fc0d7600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555065b5e620f480006005556005546006556b033b2e3c9fd0803ce80000006007553480156100a457600080fd5b506115c4806100b46000396000f3fe60806040526004361061009c5760003560e01c806380c08a5d1161006457806380c08a5d1461016957806383caf27514610194578063c4d66de8146101bf578063cbcb3171146101e8578063ed9772b614610213578063fc0c546a1461023c5761009c565b8063017e7e58146100a15780631d0806ae146100cc5780633610724e146100f75780637fd6f15c146101135780637ff9b5961461013e575b600080fd5b3480156100ad57600080fd5b506100b6610267565b6040516100c39190611173565b60405180910390f35b3480156100d857600080fd5b506100e161028d565b6040516100ee919061132e565b60405180910390f35b610111600480360381019061010c9190610dcc565b610293565b005b34801561011f57600080fd5b50610128610658565b604051610135919061132e565b60405180910390f35b34801561014a57600080fd5b5061015361065e565b604051610160919061132e565b60405180910390f35b34801561017557600080fd5b5061017e610664565b60405161018b919061132e565b60405180910390f35b3480156101a057600080fd5b506101a961066a565b6040516101b6919061132e565b60405180910390f35b3480156101cb57600080fd5b506101e660048036038101906101e19190610d7a565b610670565b005b3480156101f457600080fd5b506101fd610742565b60405161020a919061132e565b60405180910390f35b34801561021f57600080fd5b5061023a60048036038101906102359190610e1e565b610748565b005b34801561024857600080fd5b50610251610d02565b60405161025e9190611173565b60405180910390f35b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60055481565b60006064600354346102a59190611415565b6102af91906113e4565b90506000349050600082826102c4919061146f565b905060006007541161030b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103029061128e565b60405180910390fd5b60008160015461031b919061138e565b90506000600754670de0b6b3a7640000836103369190611415565b61034091906113e4565b9050600081670de0b6b3a7640000856103599190611415565b61036391906113e4565b905060006064886064610376919061138e565b6006546103839190611415565b61038d91906113e4565b9050808311156103d2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103c99061124e565b60405180910390fd5b60008211610415576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161040c906111ee565b60405180910390fd5b81600754101561045a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104519061130e565b60405180910390fd5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb33846040518363ffffffff1660e01b81526004016104b59291906111c5565b602060405180830381600087803b1580156104cf57600080fd5b505af11580156104e3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105079190610da3565b50836001819055508160076000828254610521919061146f565b92505081905550826006819055506000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16886040516105779061115e565b60006040518083038185875af1925050503d80600081146105b4576040519150601f19603f3d011682016040523d82523d6000602084013e6105b9565b606091505b50509050806105fd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105f49061126e565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff167f8fafebcaf9d154343dad25669bfa277f4fbacd7ac6b0c4fed522580e040a0f338489604051610645929190611349565b60405180910390a2505050505050505050565b60035481565b60065481565b60015481565b60025481565b600073ffffffffffffffffffffffffffffffffffffffff1660008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146106ff576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106f69061122e565b60405180910390fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b60075481565b6000821161078b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107829061120e565b60405180910390fd5b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231336040518263ffffffff1660e01b81526004016107e79190611173565b60206040518083038186803b1580156107ff57600080fd5b505afa158015610813573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108379190610df5565b90508281101561087c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610873906112ce565b60405180910390fd5b6000600754670de0b6b3a7640000856108959190611415565b61089f91906113e4565b90506000670de0b6b3a7640000600a836108b99190611415565b6108c391906113e4565b9050600a8111156108d357600a90505b600060648260646108e4919061146f565b6006546108f19190611415565b6108fb91906113e4565b90506000670de0b6b3a764000082886109149190611415565b61091e91906113e4565b9050806001541015610965576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161095c906112ae565b60405180910390fd5b600087600754610975919061138e565b9050600082600154610987919061146f565b9050600082670de0b6b3a7640000836109a09190611415565b6109aa91906113e4565b905060648960646109bb919061146f565b6006546109c89190611415565b6109d291906113e4565b811015610a14576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a0b9061124e565b60405180910390fd5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd33308d6040518463ffffffff1660e01b8152600401610a719392919061118e565b602060405180830381600087803b158015610a8b57600080fd5b505af1158015610a9f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ac39190610da3565b50600060648786610ad49190611415565b610ade91906113e4565b905060008186610aee919061146f565b905060003373ffffffffffffffffffffffffffffffffffffffff1682604051610b169061115e565b60006040518083038185875af1925050503d8060008114610b53576040519150601f19603f3d011682016040523d82523d6000602084013e610b58565b606091505b5050905080610b9c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b93906112ee565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1683604051610be29061115e565b60006040518083038185875af1925050503d8060008114610c1f576040519150601f19603f3d011682016040523d82523d6000602084013e610c24565b606091505b50508091505080610c6a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c619061126e565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff167fccbea4088a3b7ae9ca2d15fab9a9742a4075b4d7247768a1eecea917565aba008e84604051610cb2929190611349565b60405180910390a28c60076000828254610ccc919061138e565b925050819055508660016000828254610ce5919061146f565b925050819055508360068190555050505050505050505050505050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600081359050610d3581611549565b92915050565b600081519050610d4a81611560565b92915050565b600081359050610d5f81611577565b92915050565b600081519050610d7481611577565b92915050565b600060208284031215610d8c57600080fd5b6000610d9a84828501610d26565b91505092915050565b600060208284031215610db557600080fd5b6000610dc384828501610d3b565b91505092915050565b600060208284031215610dde57600080fd5b6000610dec84828501610d50565b91505092915050565b600060208284031215610e0757600080fd5b6000610e1584828501610d65565b91505092915050565b60008060408385031215610e3157600080fd5b6000610e3f85828601610d50565b9250506020610e5085828601610d50565b9150509250929050565b610e63816114a3565b82525050565b6000610e7660178361137d565b91507f496e73756666696369656e742045544820746f206275790000000000000000006000830152602082019050919050565b6000610eb660208361137d565b91507f416d6f756e74206d7573742062652067726561746572207468616e207a65726f6000830152602082019050919050565b6000610ef660218361137d565b91507f426f6e64696e6743757276653a20416c726561647920696e697469616c697a6560008301527f64000000000000000000000000000000000000000000000000000000000000006020830152604082019050919050565b6000610f5c60118361137d565b91507f536c69707061676520746f6f20686967680000000000000000000000000000006000830152602082019050919050565b6000610f9c60138361137d565b91507f466565207472616e73666572206661696c6564000000000000000000000000006000830152602082019050919050565b6000610fdc60228361137d565b91507f426f6e64696e6743757276653a204e6f20746f6b656e7320696e20726573657260008301527f76650000000000000000000000000000000000000000000000000000000000006020830152604082019050919050565b6000611042601c8361137d565b91507f496e73756666696369656e74207669727475616c2072657365727665000000006000830152602082019050919050565b6000611082601a8361137d565b91507f496e73756666696369656e7420746f6b656e2062616c616e63650000000000006000830152602082019050919050565b60006110c2600083611372565b9150600082019050919050565b60006110dc60168361137d565b91507f526566756e64207472616e73666572206661696c6564000000000000000000006000830152602082019050919050565b600061111c601a8361137d565b91507f496e73756666696369656e7420746f6b656e20726573657276650000000000006000830152602082019050919050565b611158816114e1565b82525050565b6000611169826110b5565b9150819050919050565b60006020820190506111886000830184610e5a565b92915050565b60006060820190506111a36000830186610e5a565b6111b06020830185610e5a565b6111bd604083018461114f565b949350505050565b60006040820190506111da6000830185610e5a565b6111e7602083018461114f565b9392505050565b6000602082019050818103600083015261120781610e69565b9050919050565b6000602082019050818103600083015261122781610ea9565b9050919050565b6000602082019050818103600083015261124781610ee9565b9050919050565b6000602082019050818103600083015261126781610f4f565b9050919050565b6000602082019050818103600083015261128781610f8f565b9050919050565b600060208201905081810360008301526112a781610fcf565b9050919050565b600060208201905081810360008301526112c781611035565b9050919050565b600060208201905081810360008301526112e781611075565b9050919050565b60006020820190508181036000830152611307816110cf565b9050919050565b600060208201905081810360008301526113278161110f565b9050919050565b6000602082019050611343600083018461114f565b92915050565b600060408201905061135e600083018561114f565b61136b602083018461114f565b9392505050565b600081905092915050565b600082825260208201905092915050565b6000611399826114e1565b91506113a4836114e1565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156113d9576113d86114eb565b5b828201905092915050565b60006113ef826114e1565b91506113fa836114e1565b92508261140a5761140961151a565b5b828204905092915050565b6000611420826114e1565b915061142b836114e1565b9250817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0483118215151615611464576114636114eb565b5b828202905092915050565b600061147a826114e1565b9150611485836114e1565b925082821015611498576114976114eb565b5b828203905092915050565b60006114ae826114c1565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b611552816114a3565b811461155d57600080fd5b50565b611569816114b5565b811461157457600080fd5b50565b611580816114e1565b811461158b57600080fd5b5056fea264697066735822122045b68cf21aeb26ee47424fb05127b5c31d314ca2dfb28f1c95fac1abf63b909c64736f6c6343000800003360806040526012600260006101000a81548160ff021916908360ff1602179055506b033b2e3c9fd0803ce80000006003553480156200003d57600080fd5b506040516200120838038062001208833981810160405281019062000063919062000287565b82600090805190602001906200007b9291906200014e565b508160019080519060200190620000949291906200014e565b50600354600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508073ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef6003546040516200013d919062000320565b60405180910390a3505050620004c6565b8280546200015c9062000418565b90600052602060002090601f016020900481019282620001805760008555620001cc565b82601f106200019b57805160ff1916838001178555620001cc565b82800160010185558215620001cc579182015b82811115620001cb578251825591602001919060010190620001ae565b5b509050620001db9190620001df565b5090565b5b80821115620001fa576000816000905550600101620001e0565b5090565b6000620002156200020f8462000371565b6200033d565b9050828152602081018484840111156200022e57600080fd5b6200023b848285620003e2565b509392505050565b6000815190506200025481620004ac565b92915050565b600082601f8301126200026c57600080fd5b81516200027e848260208601620001fe565b91505092915050565b6000806000606084860312156200029d57600080fd5b600084015167ffffffffffffffff811115620002b857600080fd5b620002c6868287016200025a565b935050602084015167ffffffffffffffff811115620002e457600080fd5b620002f2868287016200025a565b9250506040620003058682870162000243565b9150509250925092565b6200031a81620003d8565b82525050565b60006020820190506200033760008301846200030f565b92915050565b6000604051905081810181811067ffffffffffffffff821117156200036757620003666200047d565b5b8060405250919050565b600067ffffffffffffffff8211156200038f576200038e6200047d565b5b601f19601f8301169050602081019050919050565b6000620003b182620003b8565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b60005b8381101562000402578082015181840152602081019050620003e5565b8381111562000412576000848401525b50505050565b600060028204905060018216806200043157607f821691505b602082108114156200044857620004476200044e565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b620004b781620003a4565b8114620004c357600080fd5b50565b610d3280620004d66000396000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c8063313ce56711610066578063313ce5671461013457806370a082311461015257806395d89b4114610182578063a9059cbb146101a0578063dd62ed3e146101d057610093565b806306fdde0314610098578063095ea7b3146100b657806318160ddd146100e657806323b872dd14610104575b600080fd5b6100a0610200565b6040516100ad9190610a47565b60405180910390f35b6100d060048036038101906100cb91906108ca565b61028e565b6040516100dd9190610a2c565b60405180910390f35b6100ee6103ef565b6040516100fb9190610ac9565b60405180910390f35b61011e6004803603810190610119919061087b565b6103f5565b60405161012b9190610a2c565b60405180910390f35b61013c61055f565b6040516101499190610ae4565b60405180910390f35b61016c60048036038101906101679190610816565b610572565b6040516101799190610ac9565b60405180910390f35b61018a61058a565b6040516101979190610a47565b60405180910390f35b6101ba60048036038101906101b591906108ca565b610618565b6040516101c79190610a2c565b60405180910390f35b6101ea60048036038101906101e5919061083f565b61062f565b6040516101f79190610ac9565b60405180910390f35b6000805461020d90610c2d565b80601f016020809104026020016040519081016040528092919081815260200182805461023990610c2d565b80156102865780601f1061025b57610100808354040283529160200191610286565b820191906000526020600020905b81548152906001019060200180831161026957829003601f168201915b505050505081565b60008073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614156102ff576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102f690610aa9565b60405180910390fd5b81600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040516103dd9190610ac9565b60405180910390a36001905092915050565b60035481565b600081600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410156104b6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104ad90610a69565b60405180910390fd5b6104c1848484610654565b81600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825461054d9190610b71565b92505081905550600190509392505050565b600260009054906101000a900460ff1681565b60046020528060005260406000206000915090505481565b6001805461059790610c2d565b80601f01602080910402602001604051908101604052809291908181526020018280546105c390610c2d565b80156106105780601f106105e557610100808354040283529160200191610610565b820191906000526020600020905b8154815290600101906020018083116105f357829003601f168201915b505050505081565b6000610625338484610654565b6001905092915050565b6005602052816000526040600020602052806000526040600020600091509150505481565b80600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410156106d6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106cd90610a89565b60405180910390fd5b80600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546107259190610b71565b9250508190555080600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825461077b9190610b1b565b925050819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516107df9190610ac9565b60405180910390a3505050565b6000813590506107fb81610cce565b92915050565b60008135905061081081610ce5565b92915050565b60006020828403121561082857600080fd5b6000610836848285016107ec565b91505092915050565b6000806040838503121561085257600080fd5b6000610860858286016107ec565b9250506020610871858286016107ec565b9150509250929050565b60008060006060848603121561089057600080fd5b600061089e868287016107ec565b93505060206108af868287016107ec565b92505060406108c086828701610801565b9150509250925092565b600080604083850312156108dd57600080fd5b60006108eb858286016107ec565b92505060206108fc85828601610801565b9150509250929050565b61090f81610bb7565b82525050565b600061092082610aff565b61092a8185610b0a565b935061093a818560208601610bfa565b61094381610cbd565b840191505092915050565b600061095b601d83610b0a565b91507f45524332303a20496e73756666696369656e7420616c6c6f77616e63650000006000830152602082019050919050565b600061099b601b83610b0a565b91507f45524332303a20496e73756666696369656e742062616c616e636500000000006000830152602082019050919050565b60006109db601e83610b0a565b91507f45524332303a20417070726f766520746f207a65726f206164647265737300006000830152602082019050919050565b610a1781610be3565b82525050565b610a2681610bed565b82525050565b6000602082019050610a416000830184610906565b92915050565b60006020820190508181036000830152610a618184610915565b905092915050565b60006020820190508181036000830152610a828161094e565b9050919050565b60006020820190508181036000830152610aa28161098e565b9050919050565b60006020820190508181036000830152610ac2816109ce565b9050919050565b6000602082019050610ade6000830184610a0e565b92915050565b6000602082019050610af96000830184610a1d565b92915050565b600081519050919050565b600082825260208201905092915050565b6000610b2682610be3565b9150610b3183610be3565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff03821115610b6657610b65610c5f565b5b828201905092915050565b6000610b7c82610be3565b9150610b8783610be3565b925082821015610b9a57610b99610c5f565b5b828203905092915050565b6000610bb082610bc3565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600060ff82169050919050565b60005b83811015610c18578082015181840152602081019050610bfd565b83811115610c27576000848401525b50505050565b60006002820490506001821680610c4557607f821691505b60208210811415610c5957610c58610c8e565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000601f19601f8301169050919050565b610cd781610ba5565b8114610ce257600080fd5b50565b610cee81610be3565b8114610cf957600080fd5b5056fea264697066735822122032eff8145b39c93df9fb3586651240e99c4de92746cda0815486d80be5814cfb64736f6c63430008000033a26469706673582212208c78ad1bcd82623ff403463a07d1eb9a49efd9f333ef2ae66f043a0094a9fbc064736f6c63430008000033"; // Replace with your Bytecode file path

// Set deployment parameters
const feeToSetter = '0x65c4088F90D40FA1d1F7e286E45abc66dcEa01ff'; // Replace with your address
const feeTo = '0x65c4088F90D40FA1d1F7e286E45abc66dcEa01ff'; // Replace with a valid fee receiver address

const deploy = async () => {
    try {
        // Estimate gas
        console.log('Estimating gas for deployment...');
        const factoryContract = new web3.eth.Contract(contractABI);
        const gasEstimate = await factoryContract.deploy({
            data: contractBytecode,
            arguments: [feeToSetter, feeTo],
        }).estimateGas({ from: deployerAccount.address });

        console.log(`Estimated gas: ${gasEstimate}`);

        // Deploy the contract
        console.log('Deploying the contract...');
        const signedTx = await deployerAccount.signTransaction({
            data: factoryContract.deploy({
                data: contractBytecode,
                arguments: [feeToSetter, feeTo],
            }).encodeABI(),
            gas: gasEstimate,
            from: deployerAccount.address,
        });

        const receipt = await web3.eth.sendSignedTransaction(signedTx.rawTransaction);
        console.log('Contract deployed at address:', receipt.contractAddress);
        console.log('Transaction receipt:', receipt);

    } catch (error) {
        console.error('Error during contract deployment:', error.message);
    }
};

deploy();
